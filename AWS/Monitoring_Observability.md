# AWS監視・ログ・可視化サービス学習記録

## 学習概要
- CloudWatch (Agent, EMF)
- CloudTrail (管理イベント, データイベント)
- AWS Config
- AWS X-Ray

## CloudWatch
- **役割**: リソースの「健康診断」（CPU使用率、ログなど）。
- **Agent設定のポリシー**:
    - `CloudWatchAgentAdminPolicy`: 設定ファイル作成用（SSMへの書き込み権限あり）。最初の1台目に使用。
    - `CloudWatchAgentServerPolicy`: 運用用（読み取り権限のみ）。2台目以降や本番で使用（セキュア）。
- **EMF (Embedded Metric Format)**:
    - 特定のフォーマットでログを出すだけで、自動的にメトリクス（グラフ）も生成してくれる機能。
    - 「ログ送信」と「メトリクス送信」を1回で済ませられるため、高速かつ低コスト。

## CloudTrail
- **役割**: AWSアカウント内の「監視カメラ」（誰が、いつ、何をしたか）。
- **イベント分類**:
    - **管理イベント**: リソースの作成・削除など（デフォルトON、無料）。
    - **データイベント**: S3の中身を見る、Lambda実行など（デフォルトOFF、有料）。不用意にONにすると高額になる。
    - **Insights**: AIが異常な操作頻度などを検知する（有料）。

## AWS Config
- **役割**: リソースの「構成管理」と「ルール違反チェック」。
- **CloudTrailとの違い**:
    - CloudTrailは「操作（動詞）」を記録する（誰が変更したか）。
    - Configは「状態（名詞）」を記録する（設定がどう変わったか）。
- **機能**: タイムマシンのように過去の設定を確認したり、セキュリティルール（例：S3公開禁止）違反を検知・自動修復したりできる。

## AWS X-Ray
- **役割**: 分散システムの「レントゲン検査」。
- **レイテンシー**: 通信の待ち時間・遅延のこと。
- **機能**: マイクロサービスやサーバーレス構成において、リクエストがどのサービスを経由し、どこで時間がかかっているか（ボトルネック）を可視化する。

## 現時点での理解レベル
- CloudWatch = 健康診断、CloudTrail = 防犯カメラ、Config = 備品台帳・校則チェック、X-Ray = レントゲン という役割分担で整理できた。
- CloudTrailのデータイベントは「図書館の本の中身」への操作で、全部記録すると大変（高額）になるという点が重要。
- EMFは「レシート（ログ）を出せば勝手に家計簿（メトリクス）がつく」魔法のフォーマット。

## 理解に苦しんだところ

